<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Space Explorer â€¢ Planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="css/style.css" />

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

  <!-- MiniGame entrypoint (en vez de main.js) -->
  <script type="module" src="js/mini-game1.js"></script>

  <style>
    /* En planeta solo usamos X */
    #move-y { display:none !important; }
  </style>
</head>

<body>
  <div class="game-layout">

    <!-- TOP BAR -->
    <section class="game-topbar">

      <!-- LEFT: SHIP -->
      <aside class="panel">
        <div class="panel-inner">
          <h3 style="margin:0 0 10px 0; color: rgba(255,255,255,0.65);">Nave</h3>
          <div id="ship-name" style="font-weight:800; font-size:16px;"></div>

          <div class="bar-group">
            <small>BaterÃ­as</small>
            <div class="bar battery">
              <div id="battery-bar"></div>
              <span id="battery-text"></span>
            </div>
          </div>

          <div class="bar-group">
            <small>Carga</small>
            <div class="bar cargo">
              <div id="cargo-bar"></div>
              <span id="cargo-text"></span>
            </div>
          </div>

          <div class="bar-group">
            <small id="defense-label"></small>
            <div class="bar defense">
              <div id="defense-bar"></div>
              <span id="defense-text"></span>
            </div>
          </div>
        </div>
      </aside>

      <!-- CENTER: MOVEMENT / STATUS -->
      <section class="panel">
        <div class="panel-inner">
          <h3 style="margin:0 0 10px 0; color: rgba(255,255,255,0.65);">Superficie (Plano X)</h3>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <input id="move-x"  type="number"  min="0"  max="500"  step="1"  inputmode="numeric"/>
            <input id="move-y"  type="number"  min="0"  max="500"  step="1"  inputmode="numeric"/>
            <button id="move-btn" type="button" class="btn primary" style="flex: 1 1 140px;">Mover</button>
            <button id="scan-btn" type="button" class="btn" style="flex: 1 1 140px;">Escanear</button>
            <button id="back-btn" type="button" class="btn danger" style="flex: 1 1 160px;">Salir del planeta</button>
          </div>

          <div id="travel-status" style="margin-top:10px;"></div>
          <div id="radar-status" style="margin-top:8px; font-weight:900;">ðŸ“¡ Radar: --</div>
          <div id="player-coords" style="margin-top:6px; color: rgba(255,255,255,0.80);"></div>
          <div id="planet-title" style="margin-top:6px; color: rgba(255,255,255,0.65);"></div>
        </div>
      </section>

      <!-- RIGHT: PLAYER -->
      <aside class="panel">
        <div class="panel-inner">
          <div style="display:flex; align-items:center; gap:10px;">
            <div style="font-size:26px;">ðŸš€</div>
            <div>
              <div id="player-name" style="font-weight:900; font-size:16px;">Comandante</div>
              <div id="player-location" style="color: rgba(255,255,255,0.65); font-size:13px;">â€”</div>
            </div>
          </div>

          <div class="kv">
            <span>CrÃ©ditos</span>
            <span id="player-credits">0</span>
          </div>

          <div style="display:grid; gap:10px; margin-top:12px;">
            <button id="logout-btn" type="button" class="btn">Logout</button>
            <button id="delete-character-btn" type="button" class="btn danger">Eliminar personaje</button>
          </div>
        </div>
      </aside>

    </section>

    <!-- MAIN -->
    <main class="game-main">
      <section class="panel">
        <div class="panel-inner">
          <div style="display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;">
            <h2 style="margin:0 0 10px 0;">Recursos detectados</h2>
            <div id="scan-meta" style="color: rgba(255,255,255,0.65); font-size: 13px;"></div>
          </div>

          <!-- Imagen del planeta (opcional) -->
          <div id="planet-image-wrap" style="margin: 8px 0 14px 0; border-radius: 14px; overflow:hidden; border: 1px solid rgba(255,255,255,0.12);">
            <img id="planet-image" alt="planet" style="width:100%; height:220px; object-fit:cover; display:none;" />
            <div id="planet-image-fallback" style="padding: 14px; color: rgba(255,255,255,0.65);">Este planeta no tiene imagen asignada.</div>
          </div>

          <div id="objects-container" class="objects"></div>
        </div>
      </section>
    </main>

  </div>
</body>
</html>

